import{r as d,a as De,R as Ce}from"./vendor-b1791c80.js";import{u as L,w as Re}from"./utils-6c4e335f.js";(function(){const o=document.createElement("link").relList;if(o&&o.supports&&o.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))i(l);new MutationObserver(l=>{for(const n of l)if(n.type==="childList")for(const m of n.addedNodes)m.tagName==="LINK"&&m.rel==="modulepreload"&&i(m)}).observe(document,{childList:!0,subtree:!0});function u(l){const n={};return l.integrity&&(n.integrity=l.integrity),l.referrerPolicy&&(n.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?n.credentials="include":l.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function i(l){if(l.ep)return;l.ep=!0;const n=u(l);fetch(l.href,n)}})();var me={exports:{}},B={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Oe=d,Me=Symbol.for("react.element"),Le=Symbol.for("react.fragment"),Ee=Object.prototype.hasOwnProperty,Ae=Oe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Ie={key:!0,ref:!0,__self:!0,__source:!0};function xe(a,o,u){var i,l={},n=null,m=null;u!==void 0&&(n=""+u),o.key!==void 0&&(n=""+o.key),o.ref!==void 0&&(m=o.ref);for(i in o)Ee.call(o,i)&&!Ie.hasOwnProperty(i)&&(l[i]=o[i]);if(a&&a.defaultProps)for(i in o=a.defaultProps,o)l[i]===void 0&&(l[i]=o[i]);return{$$typeof:Me,type:a,key:n,ref:m,props:l,_owner:Ae.current}}B.Fragment=Le;B.jsx=xe;B.jsxs=xe;me.exports=B;var e=me.exports,W={},ie=De;W.createRoot=ie.createRoot,W.hydrateRoot=ie.hydrateRoot;const _e="modulepreload",ke=function(a){return"/"+a},de={},Fe=function(o,u,i){if(!u||u.length===0)return o();const l=document.getElementsByTagName("link");return Promise.all(u.map(n=>{if(n=ke(n),n in de)return;de[n]=!0;const m=n.endsWith(".css"),N=m?'[rel="stylesheet"]':"";if(!!i)for(let v=l.length-1;v>=0;v--){const h=l[v];if(h.href===n&&(!m||h.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${n}"]${N}`))return;const f=document.createElement("link");if(f.rel=m?"stylesheet":_e,m||(f.as="script",f.crossOrigin=""),f.href=n,document.head.appendChild(f),m)return new Promise((v,h)=>{f.addEventListener("load",v),f.addEventListener("error",()=>h(new Error(`Unable to preload CSS for ${n}`)))})})).then(()=>o()).catch(n=>{const m=new Event("vite:preloadError",{cancelable:!0});if(m.payload=n,window.dispatchEvent(m),!m.defaultPrevented)throw n})},Be=.18;function ue(a){if(!isFinite(a))return 0;const o=Math.round(a*100)/100;return parseFloat(o.toFixed(2))}function ze(a,o=[]){if(!a)return{neto:0,final:0,priceAfterHiddenDiscounts:0,effectiveHiddenDiscount:0,effectiveProductDiscount:0};const{precioBase:u=0}=a;let i=u;const l=o.filter(b=>parseFloat(String(b).replace(/[^\d.-]/g,""))>0);for(const b of l)i=Math.round(i*(1-parseFloat(b)/100)*100)/100;const n=i,m=u>0?ue((1-n/u)*100):0,N=[a.desc1||0,a.desc2||0,a.desc3||0,a.desc4||0].filter(b=>b>0);for(const b of N)i=Math.round(i*(1-b/100)*100)/100;const R=i,f=ue(R*(1+Be)),v=[a.desc1||0,a.desc2||0,a.desc3||0,a.desc4||0];let h=100;for(const b of v)b>0&&(h=Math.round(h*(1-b/100)*1e4)/1e4);const z=Math.round((100-h)*100)/100;return{neto:R,final:f,priceAfterHiddenDiscounts:n,effectiveHiddenDiscount:m,effectiveProductDiscount:z}}function Te(a,o){const[u,i]=d.useState(a);return d.useEffect(()=>{const l=setTimeout(()=>{i(a)},o);return()=>{clearTimeout(l)}},[a,o]),u}const J=[{codigo:"76227",linea:"RESALTADORES",nombre:"RESALTADOR VINIFAN MILDLINER MIX COLOR EST X12 UND",precio:17.55,stock:45,desc1:0,desc2:0,desc3:0,desc4:0},{codigo:"76225",linea:"RESALTADORES",nombre:"RESALTADOR VINIFAN MILDLINER CÃLIDOS EST X24 UND",precio:37.58,stock:23,desc1:0,desc2:25,desc3:0,desc4:0},{codigo:"76226",linea:"RESALTADORES",nombre:"RESALTADOR VINIFAN MILDLINER FRIOS EST X24 UND",precio:37.58,stock:18,desc1:0,desc2:25,desc3:0,desc4:0},{codigo:"79102",linea:"BORRADORES",nombre:"BORRADOR VINIFAN BLANCO CHICO DISP X 30 UND",precio:13.19,stock:67,desc1:5,desc2:15,desc3:0,desc4:0},{codigo:"79101",linea:"BORRADORES",nombre:"BORRADOR VINIFAN BLANCO GRANDE DISP X 20 UND",precio:11.5,stock:34,desc1:2,desc2:0,desc3:4,desc4:0},{codigo:"79112",linea:"BORRADORES",nombre:"BORRADOR VINIFAN NEGRO GRANDE DISP X 20 UND",precio:9.7,stock:12,desc1:5,desc2:3,desc3:0,desc4:0}],Pe=()=>{const[a,o]=d.useState(null);return d.useEffect(()=>{Fe(()=>import("./Cotizacion-39827cac.js"),["assets/Cotizacion-39827cac.js","assets/vendor-b1791c80.js","assets/utils-6c4e335f.js"]).then(u=>{o(()=>u.default)})},[]),a?e.jsx(a,{}):e.jsx("div",{className:"min-h-screen bg-gray-100 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-4",children:"Cargando CotizaciÃ³n..."}),e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"})]})})},Ve="PEN";function k(a){return isFinite(a)?parseFloat(a.toFixed(2)):0}function F(a){return new Intl.NumberFormat("es-PE",{style:"currency",currency:Ve}).format(a||0)}function $e(){const[a,o]=d.useState([]),[u,i]=d.useState(!0),[l,n]=d.useState(!1),[m,N]=d.useState(null),[R,f]=d.useState(null);d.useEffect(()=>{v(),ve(),Ne();const t=()=>{h()},r=setInterval(()=>{h()},3e4);return window.addEventListener("beforeunload",t),()=>{window.removeEventListener("beforeunload",t),clearInterval(r)}},[]),d.useEffect(()=>{if(a.length>0&&!u){const t=setTimeout(()=>{h()},1e3);return()=>clearTimeout(t)}},[a,u]);function v(){try{const r=localStorage.getItem("catalogo_data");if(r){const{data:s,timestamp:c}=JSON.parse(r);console.log("CatÃ¡logo cargado desde localStorage:",s.length,"productos"),o(s),n(!0),N(new Date(c)),i(!1);return}}catch(r){console.warn("Error loading saved catalog:",r)}console.log("Cargando catÃ¡logo desde JSON");const t=J.map((r,s)=>({...r,idx:s,precioBase:r.precio,descManual1:0,descManual2:0,descManual3:0}));o(t),i(!1)}function h(){const t={data:a,timestamp:Date.now()};try{localStorage.setItem("catalogo_data",JSON.stringify(t)),n(!0),N(new Date),console.log("CatÃ¡logo guardado exitosamente")}catch(r){console.error("Error al guardar catÃ¡logo:",r)}}function z(){const t={};a.forEach(s=>{t[s.codigo]={descManual1:s.descManual1||0,descManual2:s.descManual2||0,descManual3:s.descManual3||0}});const r=J.map((s,c)=>{var x,y,D;return{...s,idx:c,precioBase:s.precio,descManual1:((x=t[s.codigo])==null?void 0:x.descManual1)||0,descManual2:((y=t[s.codigo])==null?void 0:y.descManual2)||0,descManual3:((D=t[s.codigo])==null?void 0:D.descManual3)||0}});o(r),f(new Date),n(!1),N(null)}function b(){localStorage.removeItem("catalogo_data"),n(!1),N(null),f(null);const t=J.map((r,s)=>({...r,idx:s,precioBase:r.precio,descManual1:0,descManual2:0,descManual3:0}));o(t)}const[g,T]=d.useState("TODAS"),[O,P]=d.useState(""),[j,V]=d.useState([0,0,0,0]),[w,K]=d.useState(1),[E,pe]=d.useState("codigo"),[I,Y]=d.useState("asc"),[he,$]=d.useState("catalog"),H=Te(O,300),Q=d.useMemo(()=>[...new Set(a.map(r=>r.linea).filter(Boolean))].sort(),[a]),[ge,U]=d.useState(!1),[Z,X]=d.useState(null),[ee,te]=d.useState(!1),[q,se]=d.useState(null);d.useEffect(()=>{je()},[g,O]);const S=d.useMemo(()=>{let t=a;if(g!=="TODAS"&&(t=t.filter(s=>s.linea===g)),H.trim()){const s=H.trim().toLowerCase();t=t.filter(c=>String(c.codigo).toLowerCase().includes(s)||String(c.nombre).toLowerCase().includes(s))}return[...t].sort((s,c)=>{let x=0;return E==="codigo"?x=String(s.codigo).localeCompare(String(c.codigo),void 0,{numeric:!0,sensitivity:"base"}):E==="linea"&&(x=String(s.linea).localeCompare(String(c.linea),void 0,{sensitivity:"base"})),I==="asc"?x:-x}).map(s=>{const{neto:c,final:x}=ze(s,j);return{...s,neto:c,final:x}})},[a,g,H,j,E,I]);function G(t,r,s){o(c=>{const x=[...c],y=S[t];if(!y)return c;const D=a.findIndex(C=>C.idx===y.idx);return D===-1?c:(x[D]={...x[D],[r]:parseFloat(String(s).replace(/[^\d.-]/g,""))||0},x)})}function fe(t){E===t?Y(r=>r==="asc"?"desc":"asc"):(pe(t),Y("asc"))}function ae(t,r){V(s=>{const c=s.slice();return c[t]=Math.max(0,parseFloat(String(r).replace(/[^\d.-]/g,""))||0),c})}function be(){const t={descOcultos:j,timestamp:Date.now()};localStorage.setItem("precios_descuentos",JSON.stringify(t)),U(!0),X(new Date)}function ve(){try{const t=localStorage.getItem("precios_descuentos");if(t){const{descOcultos:r,timestamp:s}=JSON.parse(t),c=30*24*60*60*1e3;Date.now()-s<c&&(V(r),U(!0),X(new Date(s)))}}catch(t){console.warn("Error loading saved discounts:",t)}}function ye(){V([0,0,0,0]),localStorage.removeItem("precios_descuentos"),U(!1),X(null)}function Ne(){try{const t=localStorage.getItem("search_filters");if(t){const{selectedLine:r,search:s,timestamp:c}=JSON.parse(t),x=24*60*60*1e3;Date.now()-c<x&&(T(r||"TODAS"),P(s||""),te(!0),se(new Date(c)))}}catch(t){console.warn("Error loading saved search filters:",t)}}function je(){const t={selectedLine:g,search:O,timestamp:Date.now()};localStorage.setItem("search_filters",JSON.stringify(t)),te(!0),se(new Date)}function _(t){if(!t)return"";const s=new Date-t,c=Math.floor(s/(1e3*60)),x=Math.floor(s/(1e3*60*60)),y=Math.floor(s/(1e3*60*60*24));return c<60?`hace ${c} min`:x<24?`hace ${x}h`:`hace ${y} dÃ­as`}function re(){if(!S.length)return;const t=L.book_new(),r=g==="TODAS"?[...new Set(S.map(C=>C.linea))].filter(Boolean):[g];for(const C of r){const ne=S.filter(p=>p.linea===C);if(ne.length===0)continue;const oe=["cÃ³digo","lÃ­nea","nombre","precioBase","descOculto1","descOculto2","descOculto3","descOculto4","descManual1","descManual2","neto","+IGV","final"],le=[oe,...ne.map(p=>[p.codigo??"",p.linea??"",p.nombre??"",p.precioBase,...j.map(A=>parseFloat(String(A).replace(/[^\d.-]/g,""))||0),p.descManual1,p.descManual2,p.neto,p.final,p.final])],M=L.aoa_to_sheet(le);M["!autofilter"]={ref:L.encode_range(L.decode_range(M["!ref"]))},M["!cols"]=[{wch:14},{wch:16},{wch:48},{wch:14},{wch:12},{wch:12},{wch:12},{wch:12},{wch:14},{wch:14},{wch:14},{wch:14},{wch:14}],M["!freeze"]={xSplit:0,ySplit:1};const we=new Set([3,10,11,12]);for(let p=0;p<oe.length;p++){const A=M[L.encode_cell({r:0,c:p})];A&&(A.s={font:{bold:!0}})}for(let p=1;p<le.length;p++)for(const A of we){const ce=M[L.encode_cell({r:p,c:A})];ce&&(ce.z="#,##0.00")}const Se=(C||"Sheet").slice(0,31).replace(/[/\\?*[\]:]/g,"_");L.book_append_sheet(t,M,Se)}const s=new Date,c=`${s.getFullYear()}-${String(s.getMonth()+1).padStart(2,"0")}-${String(s.getDate()).padStart(2,"0")}_${String(s.getHours()).padStart(2,"0")}-${String(s.getMinutes()).padStart(2,"0")}`,x=g==="TODAS"?"TODAS":g,y=j.map(C=>String(parseFloat(String(C).replace(/[^\d.-]/g,""))||0).replace(/\./g,"-")).join("-"),D=`precios_${x.toLowerCase()}-descuentos${y}_${c}.xlsx`;Re(t,D)}return he==="quotation"?e.jsx(Pe,{onBack:()=>$("catalog"),catalogData:a,descOcultos:j}):e.jsxs("div",{className:"min-h-screen bg-gray-100",children:[e.jsx("header",{className:"bg-white shadow-sm border-b",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-4",children:[e.jsx("div",{className:"flex items-center justify-center mb-4",children:e.jsxs("div",{className:"bg-gray-100 p-1 rounded-lg flex",children:[e.jsx("button",{onClick:()=>$("catalog"),className:"px-4 py-2 rounded-md text-sm font-medium transition-all bg-blue-600 text-white shadow-md",children:"ðŸ“‹ CatÃ¡logo"}),e.jsx("button",{onClick:()=>$("quotation"),className:"px-4 py-2 rounded-md text-sm font-medium transition-all bg-purple-600 text-white shadow-md",children:"ðŸ§¾ CotizaciÃ³n"})]})}),e.jsx("div",{className:"flex items-center justify-center mb-4",children:e.jsxs("div",{className:"bg-gray-100 p-1 rounded-lg flex gap-2",children:[e.jsxs("button",{onClick:h,className:"inline-flex items-center gap-2 bg-green-600 hover:bg-green-700 active:bg-green-800 text-white px-3 py-1.5 rounded-md text-xs font-medium transition-colors shadow-sm",children:[e.jsx("svg",{className:"w-3 h-3",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})}),"Grabar CatÃ¡logo"]}),e.jsxs("button",{onClick:z,className:"inline-flex items-center gap-2 bg-blue-600 hover:bg-blue-700 active:bg-blue-800 text-white px-3 py-1.5 rounded-md text-xs font-medium transition-colors shadow-sm",children:[e.jsx("svg",{className:"w-3 h-3",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M4 2a1 1 0 011 1v2.101a7.002 7.002 0 0111.601 2.566 1 1 0 11-1.885.666A5.002 5.002 0 005.999 7H9a1 1 0 010 2H4a1 1 0 01-1-1V3a1 1 0 011-1zm.008 9.057a1 1 0 011.276.61A5.002 5.002 0 0014.001 13H11a1 1 0 110-2h5a1 1 0 011 1v5a1 1 0 11-2 0v-2.101a7.002 7.002 0 01-11.601-2.566 1 1 0 01.61-1.276z",clipRule:"evenodd"})}),"Actualizar CatÃ¡logo"]}),e.jsxs("button",{onClick:b,className:"inline-flex items-center gap-2 bg-red-600 hover:bg-red-700 active:bg-red-800 text-white px-3 py-1.5 rounded-md text-xs font-medium transition-colors shadow-sm",children:[e.jsx("svg",{className:"w-3 h-3",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M9 2a1 1 0 00-.894.553L7.382 4H4a1 1 0 000 2v10a2 2 0 002 2h8a2 2 0 002-2V6a1 1 0 100-2h-3.382l-.724-1.447A1 1 0 0011 2H9zM7 8a1 1 0 012 0v6a1 1 0 11-2 0V8zm5-1a1 1 0 00-1 1v6a1 1 0 102 0V8a1 1 0 00-1-1z",clipRule:"evenodd"})}),"Limpiar CatÃ¡logo"]})]})}),(l||R||ee&&q)&&e.jsx("div",{className:"flex items-center justify-center mb-4",children:e.jsxs("div",{className:"flex items-center gap-4 text-xs text-gray-600",children:[l&&m&&e.jsxs("div",{className:"flex items-center gap-2 text-green-600 bg-green-50 px-2 py-1 rounded border border-green-200",children:[e.jsx("svg",{className:"w-3 h-3",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}),e.jsxs("span",{children:["CatÃ¡logo guardado ",_(m)]})]}),R&&e.jsxs("div",{className:"flex items-center gap-2 text-blue-600 bg-blue-50 px-2 py-1 rounded border border-blue-200",children:[e.jsx("svg",{className:"w-3 h-3",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm1-12a1 1 0 10-2 0v4a1 1 0 00.293.707l2.828 2.829a1 1 0 101.415-1.415L11 9.586V6z",clipRule:"evenodd"})}),e.jsxs("span",{children:["Actualizado ",_(R)]})]}),ee&&q&&e.jsxs("div",{className:"flex items-center gap-2 text-purple-600 bg-purple-50 px-2 py-1 rounded border border-purple-200",children:[e.jsx("svg",{className:"w-3 h-3",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M3 3a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM3 10a1 1 0 011-1h6a1 1 0 110 2H4a1 1 0 01-1-1zM3 17a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1z",clipRule:"evenodd"})}),e.jsxs("span",{children:["Filtros guardados ",_(q)]})]})]})}),e.jsxs("div",{className:"block md:hidden space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"flex flex-col",children:[e.jsx("label",{className:"text-xs font-medium text-gray-700 mb-1",children:"LÃ­nea"}),e.jsxs("select",{className:"border border-gray-300 rounded-md px-2 py-2 bg-white text-sm",value:g,onChange:t=>T(t.target.value),children:[e.jsx("option",{value:"TODAS",children:"TODAS"}),Q.map(t=>e.jsx("option",{value:t,children:t},t))]})]}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("label",{className:"text-xs font-medium text-gray-700 mb-1",children:"Buscar"}),e.jsx("input",{type:"text",className:"border border-gray-300 rounded-md px-2 py-2 text-sm",placeholder:"cÃ³digo o nombre",value:O,onChange:t=>P(t.target.value)})]})]}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-xs font-medium text-gray-700 mb-1",children:"Desc. ocultos (%)"}),e.jsx("div",{className:"grid grid-cols-4 gap-1",children:[0,1,2,3].map(t=>e.jsx("input",{type:"number",min:"0",max:"100",step:"0.01",className:"border border-gray-300 rounded px-1 py-1 text-xs text-center",placeholder:`v${t+1}`,value:j[t],onChange:r=>ae(t,r.target.value)},t))})]}),e.jsx("button",{onClick:re,className:"w-full bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-md font-medium text-sm",children:"Descargar XLSX"})]}),e.jsxs("div",{className:"hidden md:flex md:items-center md:justify-between gap-4",children:[e.jsxs("div",{className:"flex gap-4 flex-1",children:[e.jsxs("div",{className:"flex flex-col",children:[e.jsx("label",{className:"text-sm font-medium text-gray-700 mb-1",children:"LÃ­nea"}),e.jsxs("select",{className:"border border-gray-300 rounded-md px-3 py-2 bg-white",value:g,onChange:t=>T(t.target.value),children:[e.jsx("option",{value:"TODAS",children:"TODAS"}),Q.map(t=>e.jsx("option",{value:t,children:t},t))]})]}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("label",{className:"text-sm font-medium text-gray-700 mb-1",children:"Buscar"}),e.jsx("input",{type:"text",className:"border border-gray-300 rounded-md px-3 py-2",placeholder:"cÃ³digo o nombre",value:O,onChange:t=>P(t.target.value)})]}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-sm font-medium text-gray-700 mb-1",children:"Desc. ocultos"}),e.jsx("div",{className:"grid grid-cols-4 gap-1",children:[0,1,2,3].map(t=>e.jsx("input",{type:"number",min:"0",max:"100",step:"0.01",className:"border border-gray-300 rounded px-2 py-1 text-sm text-center",placeholder:`v${t+1}`,value:j[t],onChange:r=>ae(t,r.target.value)},t))}),e.jsxs("div",{className:"flex items-center justify-between gap-2 mt-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("button",{onClick:be,className:"inline-flex items-center gap-2 bg-green-600 hover:bg-green-700 active:bg-green-800 text-white px-3 py-1.5 rounded-md text-xs font-medium transition-colors shadow-sm",children:[e.jsx("svg",{className:"w-3 h-3",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})}),"Guardar"]}),e.jsxs("button",{onClick:ye,className:"inline-flex items-center gap-2 bg-red-600 hover:bg-red-700 active:bg-red-800 text-white px-3 py-1.5 rounded-md text-xs font-medium transition-colors shadow-sm",children:[e.jsx("svg",{className:"w-3 h-3",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M9 2a1 1 0 00-.894.553L7.382 4H4a1 1 0 000 2v10a2 2 0 002 2h8a2 2 0 002-2V6a1 1 0 100-2h-3.382l-.724-1.447A1 1 0 0011 2H9zM7 8a1 1 0 012 0v6a1 1 0 11-2 0V8zm5-1a1 1 0 00-1 1v6a1 1 0 102 0V8a1 1 0 00-1-1z",clipRule:"evenodd"})}),"Limpiar"]})]}),ge&&Z&&e.jsxs("div",{className:"flex items-center gap-2 text-xs text-green-600 bg-green-50 px-2 py-1 rounded border border-green-200",children:[e.jsx("svg",{className:"w-3 h-3",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}),e.jsxs("span",{children:["Guardado ",_(Z)]})]})]})]})]}),e.jsx("div",{className:"flex items-center gap-3",children:e.jsx("button",{onClick:re,className:"bg-blue-600 hover:bg-blue-700 text-white px-6 py-2 rounded-lg font-medium",children:"Descargar XLSX"})})]})]})}),e.jsx("main",{className:"max-w-7xl mx-auto px-2 sm:px-4 py-4 sm:py-6",children:e.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg shadow-sm",children:[e.jsx("div",{className:"relative",children:S.length===0&&!u?e.jsxs("div",{className:"flex flex-col items-center justify-center py-12 text-gray-500",children:[e.jsx("svg",{className:"h-12 w-12 mb-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9.172 16.172a4 4 0 015.656 0M9 10h.01M15 10h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),e.jsx("p",{className:"text-lg font-medium",children:"No se encontraron productos."}),e.jsx("p",{className:"text-sm",children:"Intenta ajustar tus filtros o bÃºsqueda."})]}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full min-w-[800px]",children:[e.jsx("thead",{className:"sticky top-0 z-10 bg-blue-800 text-white font-bold text-sm shadow-md",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-3 py-3 text-left border-r border-blue-600 min-w-[96px]",children:e.jsxs("button",{className:"hover:text-blue-200 transition-colors text-sm font-bold",onClick:()=>fe("codigo"),title:"Ordenar por cÃ³digo","aria-label":`Ordenar por cÃ³digo ${E==="codigo"?I==="asc"?"ascendente":"descendente":""}`,children:["cÃ³digo",E==="codigo"&&e.jsx("span",{className:"ml-1",children:I==="asc"?"â–²":"â–¼"})]})}),e.jsx("th",{className:"px-3 py-3 border-r border-blue-600 min-w-[200px]",children:"nombre"}),e.jsx("th",{className:"px-3 py-3 text-center border-r border-blue-600 min-w-[80px]",children:"stock"}),e.jsx("th",{className:"px-3 py-3 text-right border-r border-blue-600 min-w-[112px]",children:"precio base"}),e.jsx("th",{className:"px-3 py-3 text-right border-r border-blue-600 min-w-[80px]",children:"desc1"}),e.jsx("th",{className:"px-3 py-3 text-right border-r border-blue-600 min-w-[80px]",children:"desc2"}),e.jsx("th",{className:"px-3 py-3 text-right border-r border-blue-600 min-w-[80px]",children:"desc3"}),e.jsx("th",{className:"px-3 py-3 text-right border-r border-blue-600 min-w-[80px]",children:"desc4"}),e.jsx("th",{className:"px-3 py-3 text-center border-r border-blue-600 min-w-[80px]",children:"Especial 1"}),w>=2&&e.jsx("th",{className:"px-3 py-3 text-center border-r border-blue-600 min-w-[80px]",children:"Especial 2"}),w>=3&&e.jsx("th",{className:"px-3 py-3 text-center border-r border-blue-600 min-w-[80px]",children:"Especial 3"}),e.jsx("th",{className:"px-3 py-3 text-center border-r border-blue-600 min-w-[80px]",children:e.jsxs("div",{className:"flex items-center gap-1 justify-center",children:[w>1&&e.jsx("button",{onClick:()=>K(Math.max(1,w-1)),className:"w-6 h-6 bg-red-500 hover:bg-red-600 text-white rounded text-xs font-medium flex items-center justify-center transition-colors",title:"Quitar descuento manual",children:"âˆ’"}),w<3&&e.jsx("button",{onClick:()=>K(Math.min(3,w+1)),className:"w-6 h-6 bg-green-500 hover:bg-green-600 text-white rounded text-xs font-medium flex items-center justify-center transition-colors",title:"Agregar descuento manual",children:"+"})]})}),e.jsx("th",{className:"px-3 py-3 text-right border-r border-blue-600 min-w-[112px]",children:"s/igv"}),e.jsx("th",{className:"px-3 py-3 text-right min-w-[112px]",children:"c/igv"})]})}),e.jsx("tbody",{className:"max-h-[600px] overflow-y-auto block",children:S.map((t,r)=>e.jsxs("tr",{className:"border-b border-gray-200 hover:bg-gray-50",children:[e.jsx("td",{className:"px-3 py-3 truncate font-mono text-sm border-r border-gray-200",children:t.codigo}),e.jsx("td",{className:"px-3 py-3 border-r border-gray-200",children:e.jsx("div",{className:"font-medium text-sm leading-tight break-words line-clamp-2 hover:line-clamp-none hover:whitespace-normal transition-all duration-200 cursor-help",title:t.nombre,children:t.nombre})}),e.jsx("td",{className:"px-3 py-3 text-center border-r border-gray-200",children:e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-bold ${(t.stock||0)>20?"bg-green-100 text-green-800":(t.stock||0)>10?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"}`,children:t.stock||0})}),e.jsx("td",{className:"px-3 py-3 text-right tabular-nums font-mono text-sm border-r border-gray-200",children:F(t.precioBase)}),e.jsx("td",{className:"px-3 py-3 text-right tabular-nums font-mono text-gray-500 text-sm border-r border-gray-200",children:t.desc1?k(t.desc1).toFixed(2):"0.00"}),e.jsx("td",{className:"px-3 py-3 text-right tabular-nums font-mono text-gray-500 text-sm border-r border-gray-200",children:t.desc2?k(t.desc2).toFixed(2):"0.00"}),e.jsx("td",{className:"px-3 py-3 text-right tabular-nums font-mono text-gray-500 text-sm border-r border-gray-200",children:t.desc3?k(t.desc3).toFixed(2):"0.00"}),e.jsx("td",{className:"px-3 py-3 text-right tabular-nums font-mono text-gray-500 text-sm border-r border-gray-200",children:t.desc4?k(t.desc4).toFixed(2):"0.00"}),e.jsx("td",{className:"px-3 py-3 text-center border-r border-gray-200",children:e.jsx("input",{type:"number",min:"0",max:"100",step:"0.01",className:"w-16 border border-gray-300 rounded px-2 py-1 text-right tabular-nums text-sm",value:t.descManual1,onChange:s=>G(r,"descManual1",s.target.value)})}),w>=2&&e.jsx("td",{className:"px-3 py-3 text-center border-r border-gray-200",children:e.jsx("input",{type:"number",min:"0",max:"100",step:"0.01",className:"w-16 border border-gray-300 rounded px-2 py-1 text-right tabular-nums text-sm",value:t.descManual2,onChange:s=>G(r,"descManual2",s.target.value)})}),w>=3&&e.jsx("td",{className:"px-3 py-3 text-center border-r border-gray-200",children:e.jsx("input",{type:"number",min:"0",max:"100",step:"0.01",className:"w-16 border border-gray-300 rounded px-2 py-1 text-right tabular-nums text-sm",value:t.descManual3||0,onChange:s=>G(r,"descManual3",s.target.value)})}),e.jsx("td",{className:"px-3 py-3 border-r border-gray-200"}),e.jsx("td",{className:"px-3 py-3 text-right tabular-nums font-mono text-green-700 text-sm border-r border-gray-200",children:F(t.neto)}),e.jsx("td",{className:"px-3 py-3 text-right tabular-nums font-mono font-bold text-blue-700 text-sm",children:F(t.final)})]},t.idx))})]})})}),e.jsxs("div",{className:"flex flex-col sm:flex-row items-center justify-between px-3 sm:px-4 py-3 sm:py-4 bg-gray-50 border-t border-gray-200 text-sm",children:[e.jsxs("div",{className:"flex flex-wrap items-center gap-2 sm:gap-4 text-gray-600 mb-3 sm:mb-0",children:[u?e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("svg",{className:"h-4 w-4 animate-spin",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),e.jsx("span",{className:"text-xs sm:text-sm",children:"Cargando..."})]}):e.jsxs("span",{className:"font-medium text-xs sm:text-sm",children:[S.length," registros"]}),g!=="TODAS"&&e.jsxs("span",{className:"text-gray-500 text-xs sm:text-sm",children:["â€¢ LÃ­nea: ",e.jsx("span",{className:"font-medium text-gray-700",children:g})]}),O&&e.jsxs("span",{className:"text-gray-500 text-xs sm:text-sm",children:["â€¢ BÃºsqueda: ",e.jsxs("span",{className:"font-medium text-gray-700",children:['"',O,'"']})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-gray-600 text-xs sm:text-sm",children:"Total visible:"}),e.jsx("span",{className:"font-bold text-base sm:text-lg text-blue-700",children:F(S.reduce((t,r)=>t+(r.final||0),0))})]})]})]})})]})}W.createRoot(document.getElementById("root")).render(e.jsx(Ce.StrictMode,{children:e.jsx($e,{})}));export{ze as c,e as j,Te as u};
